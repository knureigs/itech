<!DOCTYPE html>
<html lang="uk-UA">
<head>
	<title>ITech2, PDO</title>
	<meta charset="utf-8">
	<meta name="description" content="Версія 2023.02.16. Методичні вказівки для виконання лабораторної роботи по PDO протягом 2-го семестру курсу 'Internet-технології' для потоку КІУКІ.">
	<link rel="stylesheet" type="text/css" href="styles.css">
	<base target="_blank">
</head>
<body>
	<div class="container">
		<div id="chapters">
			<h1 id="start">Уніфікований інтерфейс PDO</h1>
			<ul>
				<li><a href="#lab_goal" target="_self">Мета роботи</a></li>
				<li><a href="#lab_manual" target="_self">Методичні вказівки</a></li>
				<li><a href="#lab_software" target="_self">Необхідні засоби</a></li>
				<li><a href="#lab_execution" target="_self">Порядок виконання роботи</a></li>
				<li><a href="#lab_variants" target="_self">Варіанти завдань</a></li>
				<li><a href="#lab_report" target="_self">Зміст звіту</a></li>
				<li><a href="#lab_questions" target="_self">Контрольні питання</a></li>
				<li><a href="#lab_literature" target="_self">Додаткові джерела</a></li>
			</ul>
		</div>
			
		<div class="chapter" id="lab_goal">
			<span class="chapter_name">1. Мета роботи</span>
			<ul>
				<li>Знайомство з використанням реляційних СУБД у веб-застосунках, створених за допомогою мови PHP.</li>
				<li>Опанування утиліти phpMyAdmin для виконання поширених операцій при роботі з базами даних.</li>
				<li>Вивчення засобів уніфікованого інтерфейсу PDO для роботи з СУБД MySQL.</li>
				<li>Розробка веб-застосунка, у якому реалізовані основні операції використання баз даних.</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_manual">
			<span class="chapter_name">2. Методичні вказівки</span>
			<p>Для підготовки до виконання лабораторної роботи слід пригадати синтаксис операторів мови SQL стосовно операцій вибірки (SELECT) і модифікації (INSERT, DELETE, UPDATE) даних. Потрібно ознайомитися з програмними методами виконання запитів до бази даних, а також етапами виконання <b>підготовленого запиту (PDO PreparedStatements)</b> до бази даних із застосуванням інтерфейсу PDO.</p>
		</div>
		
		<div class="chapter" id="lab_software">
			<span class="chapter_name">3. Необхідні засоби</span>
			<p>Для виконання лабораторної роботи рекомендується використовувати таке вільне програмне забезпечення:</p>
			<ul>
				<li>редактор коду <b>MS Visual Studio Code</b> або будь-який інший, який знайомий користувачу і забезпечує відображення синтаксису (Notepad++, Sublime Text, Atom, Brackets и т.п.);</li>
				<li>збірка для веб-розробки <b>OpenServer</b>, до складу якої входить веб-сервер Apache, інтерпретатор мови PHP та реляційна СУБД MySQL;</li>
				<li>браузер Mozilla Firefox або Google Chrome;</li>
				<li>СКВ <b>Git</b> (для роботи з сервісом <b>GitHub</b> потрібен доступ до мережі Інтернет).</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_execution">
			<span class="chapter_name">4. Порядок виконання роботи</span>
			<ol>
				<li>Використовуючи утиліту phpMyAdmin, виконати імпорт готової БД за варіантом, ознайомитися з її структурою (за потреби, внести корективи).</li>
				<li>За допомогою phpMyAdmin, доповнити дані. Довільний внесок до початкового вмісту бази зробить результати запитів менш передбачуваними та більш цікавими. Обов'язково зробити дамп БД.</li>
				<li>Підготувати необхідні за варіантом SQL-запити до БД. <!-- Зверніть увагу, що багато запитів простіші, ніж здаються на перший погляд - у деяких варіантах структура БД надлишкова. -->Перевірити виконання запитів у phpMyAdmin, використовуючи довільні значення параметрів.</li>
				<li>Створити веб-застосунок, що запитує в користувача параметри для запитів і виводить їхні результати. Використовувати при цьому підготовлені вирази (тобто звертатися до БД через методи prepare, execute та прив'язку значень параметрів, отриманих від користувача, засобами bindValue, bindParam або безпосередньо в execute).</li>
			</ol>
			<p>Рекомендації (дотримання яких спростить подальшу роботу):</p>
			<ul>
				<li>розділити код на стартову сторінку (на якій розташовано <b>окремі</b> форми для вказівки параметрів запитів), і окремі php-файли для обробників <b>кожного</b> запиту на отримання даних. У майбутньому це суттєво спростить модифікацію;</li>
				<li>оскільки код для створення підключення до БД для всіх запитів у межах одного варіанта завдання однаковий (тому що БД використовується одна), тому є сенс розмістити його в окремому php-файлі, і підключати (наприклад, через include) його за місцем вимоги, а не дублювати в кожному обробнику;</li><!-- Повноцінний шар роботи з данними робити не має сенсу, але не забороняється -->
				<li>на стартовій сторінці, елементи управління у формах для введення параметрів користувачем, де це має сенс, варто робити не текстовими полями, а списками, що випадають (формуючи їх на основі даних із БД). Це дасть змогу користувачеві обирати тільки можливі варіанти даних для запиту, а не вводити значення самостійно - це, окрім іншого, прискорить тестування вашої роботи;</li>
				<li>в елементах для введення значень параметрів, у тих випадках, коли їх реалізовано як звичайні текстові поля для введення (буває, що інакше неможливо), має сенс використовувати атрибут value зі значенням за замовчуванням. Це також спростить налагодження застосунка та його демонстрацію.</li>
			</ul>
			<p>Завдання для лабораторної роботи є індивідуальними. Можливе спільне виконання у "бригаді" варіантів <b>усіх</b> її учасників. Номер варіанта кожного студента вказано в <b>електронному журналі</b>. Виконання чужого варіанту є підставою для відхилення роботи.</p>
			<p>Відпрацювання виставляється тільки після спільної зі студентом перевірки роботи проекту, виконаного відповідно до <b>всіх</b> завдань цього розділу та правильно обраного <b>варіанту</b>.</p>
		</div>

		<div class="chapter" id="lab_variants">
			<span class="chapter_name">5. Варіанти завдань</span>
			<br>
			<p><b>Варіант 0.</b> БД для зберігання інформації про <a href="Additional/lb_pdo_library.sql">інформаційні ресурси бібліотеки</a> (Рисунок 5.0).</p>
			<figure class="pic_w_caption">
				<img src="images/lb_pdo_library_db.png">
				<figcaption>Рисунок 5.0 - Структура бази даних «Бібліотека»</figcaption>
			</figure>
			<p>Забезпечити виведення інформації о:</p>
			<ul>
				<li>книгах зазначеного видавництва;</li>
				<li>книжках, журналах і газетах, опублікованих за вказаний часовий період (враховувати рік видання);</li>
				<li>книгах зазначеного автора.</li>
			</ul>
			<p>Приклади скріншотів <a href="images/lb_pdo_library_index.png">форми для пошуку за видавництвом</a> і відповідного <a href="images/lb_pdo_library_result.png">результату пошуку</a>.</p>
			<!-- вариант на основе работы студента КІУКІ-18-3, Шепета -->
			<br>
			<p><b>Варіант 1.</b> БД для зберігання інформації про <a href="Additional/lb_pdo_lessons.sql">розклад проведення занять</a> (Рисунок 5.1).</p>
			<figure class="pic_w_caption">
				<img src="images/2.4_assigment2_bgless.png">
				<figcaption>Рисунок 5.1 – Структура бази даних «Розклад занять»</figcaption>
			</figure>
			<p>Забезпечити виведення розкладу занять для:</p>
			<ul>
				<li>довільної групи зі списку;</li>
				<li>довільного викладача зі списку;</li>
				<li>аудиторії зі списку.</li>
			</ul>
			<p>Приклад скріншоту <a href="images/itech2_lab_pdo_lessons_result.png"> результату</a> запиту для розкладу групи КІ-12-1.</p>
			<br>
			<p><b>Варіант 2.</b> БД для зберігання інформації про <a href="Additional/lb_pdo_workers.sql">процес роботи співробітників над проектами</a> (Рисунок 5.2).</p>
			<figure class="pic_w_caption">
				<img src="images/2.5_assigment3_bgless.png">
				<figcaption>Рисунок 5.2 – Структура бази даних «Робота співробітників»</figcaption>
			</figure>
			<p>Забезпечити виведення таких даних:</p>
			<ul>
				<li>інформація про виконані завдання за обраним проєктом на зазначену дату;</li>
				<li>загальний час роботи над обраним проєктом;</li><!-- полезно заглядывать в исходники, да? SELECT SUM(TIMESTAMPDIFF(DAY,time_start,time_end)) FROM WORK, project WHERE WORK.FID_PROJECTS = PROJECT.ID_PROJECTS AND PROJECT.NAME =:project -->
				<li>кількість співробітників відділу обраного керівника.</li>
			</ul>
			<p><a href="images/itech2_lab_pdo_workers_index.png">Приклад</a> скріншота стартової сторінки застосунка з формами для вказування параметрів.</p>
			<!-- вариант на основе работы студентов КІУКІ-16-5, бригада Бура, Скоромний, Рубан. -->
			<br>
			<p><b>Варіант 3.</b> БД для зберігання інформації про <a href="Additional/iteh2lb1var4.sql">робочі зміни чергувань медсестер у поліклініці</a> (Рисунок 5.3).</p>
			<figure class="pic_w_caption">
				<img src="images/2.6_assigment4_bgless.png">
				<figcaption>Рисунок 5.3 – Структура бази даних «Зміна чергувань» <i>(з помилкою, не вистачає поля в таблиці ward)</i></figcaption>
			</figure>
			<p>Для медсестри зазначено її ім'я, відділення та робочу зміну (перша, друга або третя). Для палати (hospital ward) - назва (номер). Медсестри можуть працювати в різних палатах, в одній палаті може бути більше однієї медсестри.</p>
			<p>Забезпечити виведення таких даних:</p>
			<ul>
				<li>перелік палат, у яких чергує обрана медсестра;</li>
				<li>медсестри обраного відділення;</li>
				<li>чергування (у будь-яких палатах) у зазначену зміну.</li>
			</ul>			
			<br>
			<p><b>Варіант 4.</b> БД для зберігання інформації про <a href="Additional/lb_pdo_films.sql">фільмотеку</a> (Рисунок 1.4).</p>
			<figure class="pic_w_caption">
				<img src="images/2.7_assigment5_bgless.png">
				<figcaption>Рисунок 5.4 – Структура бази даних «Фільмотека»</figcaption>
			</figure>
			<p>Забезпечити виведення таких даних:</p>
			<ul>
				<li>список фільмів обраного жанру;</li>
				<li>список фільмів з обраним актором;</li>
				<li>список фільмів за вказаний часовий інтервал.</li>
			</ul>
			<p>Приклади скріншотів <a href="images/lb_pdo_films_index.png">сторінки з усіма формами для пошуку</a> і <a href="images/lb_pdo_films_result.png">результату пошуку за одним з запитів</a>.</p>
			<!-- дамп из работы студента КІУКІ-17-4, Гудзинский -->
			<br>
			<p><b>Варіант 5.</b> БД для зберігання інформації про <a href="Additional/lb_pdo_goods.sql">товари в інтернет-магазині</a> (Рисунок 5.5).</p>
			<figure class="pic_w_caption">
				<img src="images/2.8_assigment6_bgless.png">
				<figcaption>Рисунок 5.5 – Структура бази даних «Товари в магазині»</figcaption>
			</figure>
			<p>Забезпечити виведення таких даних:</p>
			<ul>
				<li>товари обраного виробника;</li>
				<li>товари в обраної категорії;</li>
				<li>товари в обраному ціновому діапазоні.</li>
			</ul>
			<!-- дамп из работы студентов КИ-12-3, Ведмеденко, Левчук -->
			<br>
			<p><b>Варіант 6.</b> БД для зберігання <a href="Additional/lb_pdo_rent.sql">інформації про пункт прокату машин</a> (Рисунок 5.6).</p>
			<figure class="pic_w_caption">
				<img src="images/2.9_assigment7_bgless.png">
				<figcaption>Рисунок 5.6 – Структура бази даних «Прокат машин»</figcaption>
			</figure>
			<p>Забезпечити виведення таких даних:</p>
			<ul>
				<li>отриманий дохід з прокату станом на обрану дату;</li><!-- заглядывать в исходники по-прежнему полезно... 'SELECT SUM(Cost) FROM `rent` WHERE :date1 BETWEEN date_start AND date_end' -->
				<li>автомобілі обраного виробника;</li><!-- а для такого запроса искать подсказку стыдно -->
				<li>вільні автомобілі на обрану дату.</li><!-- 'SELECT cars.name FROM `cars` INNER JOIN rent ON cars.ID_Cars = rent.FID_Car	WHERE :date1 NOT BETWEEN date_start AND date_end' -->
			</ul>
			<!-- <p>Забезпечити можливість додавання в БД засобами веб-додатка інформації про оренду для обраного автомобіля на зазначені дати. Можливість зміни даних про пробіг для обраного автомобіля.</p> -->
			<br>
			<!-- вариант с футбольными командами хорош, но нет под рукой подходящего готового дампа -->
			<!-- <p><b>Варіант 7.</b> БД для зберігання інформації про результати футбольного чемпіонату (Рисунок 5.7).</p>
			<p>Для кожної футбольної команди задається така інформація: назва, ліга, головний тренер. Для кожної гри задається дата проведення, команди учасниці, місце проведення, фінальний рахунок, футболісти, які беруть участь.</p>
			<p>Сформувати запити і вивести результати:</p>
			<ul>
				<li>таблиця чемпіонату обраної ліги;</li>
				<li>список ігор на вказаний часовий інтервал;</li>
				<li>список ігор обраного футболіста.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.10_assigment8_bgless.png">
				<figcaption>Рисунок 5.7 – Структура бази даних «Футбольний чемпіонат»</figcaption>
			</figure>
			<br> -->
			<p><b>Варіант 7.</b> БД для зберігання інформації провайдеру про <a href="Additional/lb_pdo_netstat.sql">використання мережевого трафіку</a> (Рисунок 5.7).</p>
			<figure class="pic_w_caption">
				<img src="images/2.11_assigment9_bgless.png">
				<figcaption>Рисунок 5.7 – Структура бази даних «Мережевий трафік»</figcaption>
			</figure>
			<p>Забезпечити виведення таких даних:</p>
			<ul>
				<li>сеанси роботи в мережі для обраного клієнта;</li>
				<li>сеанси роботи в мережі за вказаний проміжок часу;</li>
				<li>список клієнтів з від'ємним балансом рахунку.</li>
			</ul>
			<!-- дамп из работы студента КІУКІ-16-5, Мотькин -->
			<!-- <br> -->
			<!-- на подготовке варианта, как хотелось бы, закончился интернет -->
			<!-- <p><b>Варіант 9.</b> Створити і заповнити довільними даними БД для зберігання інформації про комп'ютери організації (Рисунок 5.9).</p>
			<p>Для кожного комп'ютера задається мережеве ім'я, тип центрального процесора, тип материнської плати, обсяг ОЗУ і НЖМД, тип монітора, встановлене програмне забезпечення, фірма-продавець, дата покупки, термін гарантії.</p>
			<p>Сформувати запити і вивести результати:</p>
			<ul>
				<li>список комп'ютерів із заданим типом центрального процесора;</li>
				<li>список комп'ютерів зі встановленим ПЗ (назву ПЗ вибирають із переліку);</li>
				<li>список комп'ютерів з вичерпаним гарантійним терміном.</li>
			</ul>
			<figure class="pic_w_caption">
				<img src="images/2.12_assigment10_bgless.png">
				<figcaption>Рисунок 5.9 – Структура бази даних «Комп'ютери організації»</figcaption>
			</figure> -->
		</div>
		
		<div class="chapter" id="lab_report">
			<span class="chapter_name">6. Зміст звіту</span>
			<p>Звіт з лабораторної роботи повинен містити: мету роботи, варіант завдання, вихідний код веб-сторінки (HTML, JavaScript и РНР), ER-діаграму структури бази даних, зображення отриманого документа, висновки по роботі. Наявність звіту не є обов'язковою. При викладанні вихідного коду на GitHub пам'ятайте про дамп БД<!-- , для тих варіантів використовуваної л/р PDO, в яких не пропонувалося вже готової БД для роботи -->.</p>
		</div>
		
		<div class="chapter" id="lab_questions">
			<span class="chapter_name">7. Контрольні запитання</span>
			<ol>
				<li>Які розширення PHP для роботи з СУБД MySQL вам відомі?</li>
				<li>Які недоліки використання реляційних СУБД?</li>
				<li>У чому полягають переваги застосування інтерфейсу доступу до баз даних PDO?</li>
				<li>Яким чином здійснюється керування підключеннями до баз даних? Як створити постійне підключення?</li>
				<li>Як виконати SQL-запит на зміну даних, використовуючи інтерфейс PDO?</li>
				<li>Як отримати результати запиту на вибірку?</li>
				<li>Як отримати кількість рядків, які були змінені під час виконання останнього запиту на виконання?</li>
				<li>Як отримати ID останнього доданого рядка?</li>
				<li>Як перевірити наявність помилок під час з'єднання з базою даних або виконання SQL-запиту? У чому різниця між використанням методу errorInfo() для об'єкта PDOStatement і для об'єкта PDO?</li>
				<li>Для яких цілей призначені підготовлені запити? Як виконати зв'язування псевдозмінної та значення?</li>
				<li>Які існують режими вибірки?</li>
				<li>Який режим вибірки використовується за замовчуванням?</li>
				<li>У чому відмінності між режимами вибірки PDO::FETCH_NUM и PDO::FETCH_BOTH?</li>
				<li>Для чого служить режим вибірки PDO::FETCH_KEY_PAIR?</li>
				<li>Як отримати рядок результуючої вибірки у вигляді об'єкта?</li>
				<li>Для чого використовується метод fetchAll?</li>
				<li>Визначення транзакції, приклад використання?</li>
			</ol>
			<p>Знання відповідей на наведені запитання є необхідною, але не достатньою умовою для отримання високої оцінки за захист лабораторної роботи. Пам'ятайте про теми, розглянуті на лекціях!</p>
		</div>
		
		<div class="chapter" id="lab_literature">
			<span class="chapter_name">Корисні посилання</span>
			<ol>  
				<li><a href="http://php.net/manual/ru/">Документація до мови PHP</a></li>
				<li>Посібник із сучасної PHP-розробки <a href="http://www.phptherightway.com">PHP: The Right Way</a></li>
				<li><a href="https://tproger.ru/translations/how-to-configure-and-use-pdo/">Налаштування та використання PDO</a></li>
				<li><a href="http://phpfaq.ru/pdo/">Вільний опис процесу роботи с PDO</a></li>
				<li><a href="https://www.w3schools.com/php/php_mysql_prepared_statements.asp">PHP Prepared Statements (в PDO и MySQLi)</a></li>
				<li><a href="http://2sql.ru/">Інформаційний ресурс о SQL</a></li>
				<li>Phil Sturgeon and Josh Lockhart "PHP: The Right Way"</li>
				<li>Мэтт Зандстра "PHP. Объекты, шаблоны и методики программирования".</li>
				<li>Энди Гутманс, Стиг Баккен, Дерик Ретанс "PHP 5. Профессиональное программирование".</li>
				<!-- <li>Джордж Шлосснейгл "Профессиональное программирование на PHP".</li>
				<li>Кевин Янк "PHP и MySQL. От новичка к профессионалу".</li> -->
			</ol>
		</div>
		<br><a href="#start" target="_self">Повернутися до початку</a>
		<!-- <br><a href="..\..\index.html" target="_self">Повернутися на стартову сторінку ресурсу</a> -->
		<!-- Вдалого відпрацювання! --> 
	</div>
</body>
</html>