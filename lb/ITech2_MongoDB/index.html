<!DOCTYPE html>
<html lang="uk-UA">
<head>
	<title>ITech2, MongoDB</title>
	<meta charset="utf-8">
	<meta name="description " content="Версія 2023.03.26. Методичні вказівки для виконання лабораторної роботи по MongoDB протягом 2-го семестру курсу 'Internet-технології' для потоку КІУКІ.">
	<link rel="stylesheet" type="text/css" href="styles.css">
	<base target="_blank">
</head>
<body>
	<div class="container">
		<div id="chapters">
			<h1 id="start">Нереляційна СУБД MongoDB і зберігання даних на стороні клієнта</h1>
			<ul>
				<li><a href="#lab_goal" target="_self">Мета роботи</a></li>
				<li><a href="#lab_manual" target="_self">Методичні вказівки</a></li>
				<li><a href="#lab_software" target="_self">Необхідні засоби</a></li>
				<li><a href="#lab_execution" target="_self">Порядок виконання роботи</a></li>
				<li><a href="#lab_variants" target="_self">Варіанти завдань</a></li>
				<li><a href="#lab_report" target="_self">Зміст звіту</a></li>
				<li><a href="#lab_questions" target="_self">Контрольні питання</a></li>
				<li><a href="#lab_literature" target="_self">Додаткові джерела</a></li>
			</ul>
		</div>
			
		<div class="chapter" id="lab_goal">
			<span class="chapter_name">1. Мета роботи</span>
			<ul>
				<li>Знайомство з використанням нереляційної СУБД MongoDB, використовуючи інтерфейс командного рядку.</li>
				<li>Вивчення методів для роботи з MongoDB у мові PHP.</li>
				<li>Розробка веб-застосунка, у якому реалізовані основні операції використання баз даних.</li>
				<li>Знайомство зі зберіганням даних на стороні клієнта, використовуючи WebStorage.</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_manual">
			<span class="chapter_name">2. Методичні вказівки</span>
			<p>Під час підготовки до виконання лабораторної роботи слід ознайомитися з можливостями нереляційної СУБД MongoDB, вивчити принципи роботи з MongoDB у консолі, та особливості її використання в мові PHP за допомогою MongoDB PHP Library і класів MongoDB\Driver\Manager, MongoDB\Client, MongoDB\Collection.</p>
			<p>Крім того, потрібно ознайомитися з JavaScript-методами setItem і getItem для роботи з веб-сховищами localStorage, для забезпечення запису та отримання даних на стороні клієнта.</p>
		</div>
		
		<div class="chapter" id="lab_software">
			<span class="chapter_name">3. Необхідні засоби</span>
			<p>Для виконання лабораторної роботи рекомендується використовувати таке вільне програмне забезпечення:</p>
			<ul>
				<li>редактор коду <b>MS Visual Studio Code</b> або будь-який інший, який знайомий користувачу і забезпечує відображення синтаксису (Notepad++, Sublime Text, Atom, Brackets и т.п.);</li>
				<li>збірка для веб-розробки <b>OpenServer</b>, до складу якої входить веб-сервер Apache, інтерпретатор мови PHP та, залежно від версії збірки, певні версії нереляційної СУБД MongoDB; рекомендовані версії для роботи: MongoDB 3.6.0 та PHP 7.3;</li>
				<li>браузер Mozilla Firefox або Google Chrome;</li>
				<li>СКВ <b>Git</b> (для роботи з сервісом <b>GitHub</b> потрібен доступ до мережі Інтернет).</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_execution">
			<span class="chapter_name">4. Порядок виконання роботи</span>
			<ol>
				<li>Запустити сервер MongoDB, застосунок mongod, яке знаходиться в папці bin. Якщо встановлювали MongoDB окремо, повний шлях у вашій системі буде приблизно <span class = "code_snippet">C:\Program Files\MongoDB\Server\3.6\bin\mongod.exe</span>, інакше, якщо встановлювали у складі  OpenServer, шукайте у каталозі збірки. Переконатися, що сервер готовий до підключень (наприкінці виведення консолі має бути рядок <span class = "code_snippet">waiting for connections on port 27017</span>). Не закривати сервер до завершення роботи.</li>
				<li>Запустити консольну оболонку MongoDB, застосунок mongo.exe, який знаходиться в папці bin встановленої СУБД MongoDB. Перевірити наявні на сервері бази даних (команда <span class = "code_snippet">show dbs</span>), створити БД для виконання лабораторної роботи (<span class = "code_snippet">use dbforlab</span>), створити колекцію (або колекції), використовуючи явну команду <span class = "code_snippet">db.createCollection('somecollection')</span> або створюючи колекцію неявно, під час подальшого додавання документів. Заповнити колекцію документами, що відповідають завданню, використовуючи команди save, insert або load. Перевірити заповнення БД, використовуючи команду find.
				</li>
				<li>Перевірити виконання у консолі запитів на вибірку згідно за варіантом. Використовувати засоби для обмеження вибірки документів та керування відображенням (відключення виведення непотрібних полів та модифікатор pretty).</li>
				<li>Використовуючи консоль мови PHP, перейти до каталогу проекту та виконати команду <span class = "code_snippet">composer require mongodb/mongodb</span>, що призведе (за наявності встановленого менеджера пакетів Composer) до появи в каталозі проєкту папки vendor з файлами бібліотеки для роботи з MongoDB. Для використання встановленої бібліотеки в php-файлах проєкту потрібно додати її підключення <span class = "code_snippet">require_once __DIR__ . "/vendor/autoload.php";</span></li>
				<li>Створити веб-застосунок, що запитує у користувача параметри для запитів і виводить їхні результати. Можливе повторне використання коду деяких елементів сторінки з лабораторної роботи по PDO, при умові співпадіння варінтів.</li>
				<li>Реалізувати роботу з даними на стороні клієнта. Після вказівки користувачем параметра запиту (виборі елемента списку, що випадає, введенні значення текстового поля і т.д.) у нього має бути можливість подивитися раніше збережені результати, отримані для аналогічного запиту. Для цього на сторінку слід додати елементи для виведення раніше збережених у localStorage даних (якщо вони є, або повідомлення про їхню відсутність).<!-- кнопка, після натискання на яку буде в певне місце поточної веб-сторінки виводитися вміст localStorage для аналогічного запиту з саме такими параметрами, якщо він уже виконувався в минулому.Незалежно від того, чи є раніше збережені результати, користувач може так само відправити запит на сервер, і отримати результат. Результати запитів, з урахуванням параметрів, мають бути збережені у локальному сховищі. --></li>
			</ol>
			<p>Завдання для лабораторної роботи є індивідуальними. Можливе спільне виконання у "бригаді" варіантів <b>усіх</b> її учасників. Номер варіанта кожного студента вказано в <b>електронному журналі</b>. Виконання чужого варіанту є підставою для відхилення роботи.</p>
			<p>Відпрацювання виставляється тільки після спільної зі студентом перевірки роботи проекту (включно з роботою у консолі MongoDB), виконаного відповідно до <b>всіх</b> завдань цього розділу та правильно обраного <b>варіанту</b>.</p>
		</div>

		<div class="chapter" id="lab_variants">
			<span class="chapter_name">5. Варіанти завдань</span>
			<br>
			<p><b>Варіант 0.</b> Створити та заповнити БД для зберігання інформації про літературні ресурси бібліотеки (книжках, газетах, журналах тощо). Для опису літературних ресурсів достатньо використовувати одну колекцію. Кожен літературний ресурс, представлений у вигляді документа у складі колекції, характеризується набором властивостей (і кожен, можливо, своїм власним, особливим набором). Наприклад, книги можуть характеризуватися назвою, унікальним номером (ISBN), видавництвом, роком видання, кількістю сторінок, автором (авторів може бути більше одного, тож доцільним є використання масиву). У якихось книг якоїсь із перелічених для прикладу властивостей може і не бути, або бути якась нова властивість (наприклад, наявність у комплекті диска). Журнали характеризуються зазвичай назвою, роком випуску, номером. Пам'ятайте, що немає суворого обмеження на однаковий набір полів для різних ресурсів, користуйтеся перевагами MongoDB. Запити на вибірку припускають, що необхідні поля будуть у якоїсь частини документів у колекції - але зовсім не обов'язково, що у всіх.</p>
			<p>Надати користувачеві можливість отримання інформації про:</p>
			<ul>
				<li>літературі зазначеного видавництва;</li>
				<li>літературі, опублікованій за вказаний часовий період (враховувати рік видання);</li>
				<li>літературі зазначеного автора.</li>
			</ul>
			<br>
			<p><b>Варіант 1.</b> Створити та заповнити БД для зберігання інформації про розклад занять (достатньо однієї колекції). Кожне заняття описується датою проведення, часом (вказується номер пари), аудиторією, дисципліною, типом (лекція, лабораторна, залік тощо), групою (груп може бути більше однієї - наприклад, для лекцій це нормальне явище), викладачем (він також може бути вказаний не один).</p>
			<p>Надати користувачеві можливість отримання інформації про розклад занять для:</p>
			<ul>
				<li>лабораторних робіт обраної зі списку групи;</li>
				<li>лекцій зазначеного викладача із зазначеної дисципліни;</li>
				<li>аудиторії.</li>
				<!-- <li>вільної аудиторії на задану дату і пару.</li> -->
			</ul>
			<br>
			<p><b>Варіант 2.</b> Створити та заповнити БД для зберігання інформації про роботу над завданнями. Кожне завдання належить до якогось проєкту, і описується назвою, коротким описом, працівником, який виконував проєкт (може бути більше одного), керівником, відповідальним за проєкт на момент виконання цього завдання, часом початку і часом завершення роботи. Для зберігання дати і часу в БД рекомендується використовувати формат Unix Timestamp.</p>
			<p>Надати користувачеві можливість отримання інформації про:</p>
			<ul>
				<li>виконані завдання за обраним проєктом на зазначену дату;</li>
				<li>кількість проєктів зазначеного керівника;</li>
				<li>співробітників, які працювали під керівництвом обраного керівника.</li>
			</ul>
			<br>
			<p><b>Варіант 3.</b> Створити і заповнити БД для зберігання інформації про чергування в лікарні. Чергування описується зміною (перша, друга, третя<!-- і не тільки -->), датою, задіяними медсестрами (щонайменше однією), назвою відділення, номерами палат, що використовуються на цьому чергуванні.</p>
			<p>Надати користувачеві можливість отримання інформації про:</p>
			<ul>
				<li>перелік палат, у яких чергує обрана медсестра;</li><!-- у зазначену дату -->
				<li>медсестер, які чергували в зазначеному відділенні;</li>
				<li>усі чергування (у будь-яких палатах) у зазначену зміну в зазначеному відділенні.</li>
			</ul>
			<br>
			<p><b>Варіант 4.</b> Створити і заповнити БД домашньої фільмотеки, що містить інформацію про наявні фільми, серіали, мультсеріали тощо. Об'єкти фільмотеки описуються назвою, роком виходу, типом носія (відеокасета, CD, DVD, BR) і довільним набором параметрів, серед яких режисер, актори (може бути більше одного), жанр (може бути більше одного), країна випуску тощо.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>що можна подивитися на відеокасетах;</li>
				<li>у яких фільмах брав участь обраний актор;</li>
				<li>що подивитися з нового (що вийшло цього року).</li>
			</ul>
			<br>
			<p><b>Варіант 5.</b> Створити і заповнити БД товарів інтернет-магазину (в одній колекції). Для товару обов'язково вказується назва, ціна товару, кількість одиниць на складі. Можливі поля - фірма-виробник, категорія товару (процесори, материнські плати тощо), відгуки (можуть бути і більше одного), стан (новий або б/в) тощо.</p>
			<p>Надати користувачеві можливість отримання інформації про:</p>
			<ul>
				<li>перелік виробників, з якими працює магазин;</li>
				<li>товари, відсутні на складі (тобто взагалі вони є, але зараз кількість 0);</li>
				<li>товари в обраному ціновому діапазоні.</li>
			</ul>
			<br>
			<p><b>Варіант 6.</b> Створити і заповнити БД пункту прокату автомобілів. У базі представлено дві колекції - колекція документів, що описує оренду (дата початку і завершення, вартість оренди і марка машини), і колекція, що містить документи, які описують наявні в пункті прокату автомобілі (марка, рік випуску, пробіг, стан (можливе поле)). Для зберігання дати і часу в БД рекомендується використовувати формат Unix Timestamp.</p>
			<p>Надати користувачеві можливість отримання інформації про:</p>
			<ul>
				<li>отриманий дохід з прокату станом на обрану дату;</li>
				<li>автомобілі з пробігом, меншим за вказаний;</li>
				<li>наявні в цьому пункті марки автомобілів.</li>
			</ul>
			<br>
			<p><b>Варіант 7.</b> Створити і заповнити БД футбольного чемпіонату. У базі представлено дві колекції - колекція документів, що описує команди (назва, тренер, склад команди (масив футболістів)), і колекція, яка містить документи, що описують ігри чемпіонату (ліга, дата і місце проведення, команди-учасниці гри, переможець тощо).</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>таблиця чемпіонату для обраної ліги;</li>
				<li>список футболістів зазначеної команди;</li>
				<li>список ігор, у яких брала участь обрана команда.</li>
			</ul>
			<br>
			<p><b>Варіант 8.</b> Створити і заповнити БД для зберігання інформації про використання мережевого трафіку. У базі представлено дві колекції - колекція документів, що описує користувачів (логін, пароль, статичну IP-адресу клієнта, баланс рахунка, повідомлення), і колекція, яка містить документи, що описують сеанси виходу в Мережу: час початку й закінчення сеансу роботи, кількість вхідного трафіку, кількість вихідного трафіку, IP-адресу клієнта, вартість сеансу.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>повідомлення від обраного клієнта;</li>
				<li>загальний вхідний і вихідний трафік;</li>
				<li>вивести список клієнтів з від'ємним балансом рахунку.</li>
			</ul>
			<br>
			<p><b>Варіант 9.</b> Створити і заповнити БД для зберігання інформації про комп'ютери організації. У БД представлено одну колекцію, документи якої описують комп'ютери організації - інвентарний номер, рік придбання, термін гарантії, процесор, пам'ять, об'єм диска, встановлене ліцензійне ПЗ тощо.</p>
			<p>Надати користувачеві можливість отримання такої інформації:</p>
			<ul>
				<li>список комп'ютерів із заданим типом центрального процесора;</li>
				<li>список комп'ютерів зі встановленим ПЗ (назву ПЗ вибирають із переліку);</li>
				<li>список комп'ютерів з вичерпаним гарантійним терміном.</li>
			</ul>
		</div>
		
		<div class="chapter" id="lab_report">
			<span class="chapter_name">6. Зміст звіту</span>
			<p>Звіт з лабораторної роботи повинен містити: мету роботи, варіант завдання, вихідний код веб-сторінки (HTML, JavaScript и РНР), зображення отриманого документа (що підтверджують виконання усіх пунктів порядку роботи), висновки по роботі. Наявність звіту не є обов'язковою. При викладанні вихідного коду на GitHub пам'ятайте про дамп БД (у даному випадку у якості його может бути набір консольних команд для створення бази даних, використаної у лабораторній).<!-- , для тих варіантів використовуваної л/р PDO, в яких не пропонувалося вже готової БД для роботи <li>используемые команды консоли MongoDB для создания и заполнения БД;</li>-->.</p>
		</div>
		
		<div class="chapter" id="lab_questions">
			<span class="chapter_name">7. Контрольні запитання</span>
			<ol>
				<li>Які NoSQL СУБД вам відомі?</li>
				<li>Як, використовуючи консоль MongoDB, створити і заповнити нову БД? Як виконати пошук і зміну записів?</li>
				<li>Які можливості мови PHP для роботи з NoSQL СУБД MongoDB вам відомі?</li>
				<li>Яким чином здійснюється керування підключеннями до баз даних?</li>
				<li>У чому різниця між методами find і findOne?</li>
				<li>Оператори для фільтрації вибірки та їх використання.</li>
				<li>Як обмежити вибірку заданим числом документів?</li>
				<li>Як відсортувати документи у вибірці за зростанням значення певного поля?</li>
				<li>Як уникнути відображення непотрібних (у цьому запиті) полів документа?</li>
				<li>Як додати одразу декілька документів у колекцію?</li>
				<li>Для чого використовується об'єкт MongoDB\UpdateResult?</li>
				<li>Чи можлива відсутність модифікованих документів при успішному виконанні методу updateOne і getMatchedCount більше 0?</li>
				<li>У чому полягає операція Upsert?</li>
				<li>Як видалити документи колекції?</li>
				<li>Переваги та недоліки використання WebStorage?</li>
				<li>У чому різниця між localStorage та sessionStorage?</li>
				<li>Як зберегти дані у сховищі WebStorage?</li>
				<li>Чи можна зберігати в сховищі не-строкові дані?</li>
				<li>Для чого використовуються методи JSON.stringify и JSON.parse?</li>
				<li>У яких випадках породжується подія storage?</li>
				<li>Що відбувається при переповненні локального сховища?</li>				
			</ol>
			<p>Знання відповідей на наведені запитання є необхідною, але не достатньою умовою для отримання високої оцінки за захист лабораторної роботи. Пам'ятайте про теми, розглянуті на лекціях!</p>
		</div>
		
		<div class="chapter" id="lab_literature">
			<span class="chapter_name">Корисні посилання</span>
			<ol>
				<li><a href="https://metanit.com/nosql/mongodb/">Онлайн-посібник з MongoDB</a></li>
				<!-- <li><a href="http://coldfox.ru/article/5be022d49227d914a1c83fe3/Подробное-руководство-по-MongoDB-Mongoose">Докладний посібник із MongoDB</a></li> -->
				<li><a href="https://dzone.com/articles/top-10-most-common-commands-for-beginners">Commands for MongoDB Beginners</a></li>
				<li><a href="http://gearmobile.github.io/tags/#mongodb">Цикл статей про роботу з Монго</a></li>
				<li><a href="https://habr.com/ru/post/144798/">Моделювання даних у MongoDB</a></li>
				<li><a href="https://getcomposer.org/">Dependency Manager for PHP</a></li>
				<li><a href="https://docs.mongodb.com/php-library/v1.5/tutorial/install-php-library/">MongoDB PHP Library</a></li>
				<li><a href="https://docs.mongodb.com/manual/crud/">MongoDB CRUD Operations</a></li>
				<li><a href="https://www.php.net/manual/ru/mongodb.tutorial.library.php">Використання бібліотеки PHP для MongoDB</a></li>
				<li><a href="https://www.dropbox.com/s/o985idmbmxl37du/vendor.zip?dl=0">Архів з уже готовою папкою vendor, яку можна, не використовуючи компосер, просто розпакувати та вручну розмістити у папці свого проекту. Після цього, звісно, запускати команди компосера вже не потрібно.</a></li>
				<li><a href="https://learn.javascript.ru/localstorage">LocalStorage, sessionStorage</a></li>
				<li><a href="https://html5css.ru/html/html5_webstorage.php">HTML5 Веб-сховище</a></li>
				<li><a href="https://developer.mozilla.org/ru/docs/Web/API/Web_Storage_API/Using_the_Web_Storage_API">Використання WebStorage API</a></li>
			</ol>
		</div>
		<br><a href="#start" target="_self">Повернутися до початку</a>
		<!-- <br><a href="..\..\index.html" target="_self">Повернутися на стартову сторінку ресурсу</a> -->
		<!-- Удачной отработки! --> 
	</div>
</body>
</html>